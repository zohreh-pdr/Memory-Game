let e=document.getElementById("restartBtn"),t=document.getElementById("resumeBtn"),s=new class{#e;#t;#s;constructor({restartBtn:e,resumeBtn:t}){this.restartBtn=e,this.resumeBtn=t,this.gameBoard=document.getElementById("gameBoard"),this.recordDisplay=document.getElementById("recordDisplay"),this.resultDisplay=document.getElementById("resultDisplay"),this.#t=[1,2,3,4,5,6,7,8],this.#s=[...this.#t,...this.#t],this.#e=JSON.parse(localStorage.getItem("cards"))||[],this.firstIndex=null,this.secondIndex=null,this.movements=Number(localStorage.getItem("totalMoves"))||0,this.isTesting=!1,this.matchedPairs=Number(localStorage.getItem("matchedPairs"))||0,this.record=Number(localStorage.getItem("record"))||0,this.isGameHidden=JSON.parse(localStorage.getItem("isGameHidden"))||!1}shuffleCards(e){for(let t=e.length-1;t>0;t--){let s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}initCards(){let e=this.shuffleCards(this.#s);this.#e=e.map(e=>({value:e,state:"none"})),this.saveCards()}renderCards(){this.gameBoard.innerHTML="",0===this.#e.length&&this.initCards(),console.log(this.#e),this.#e.forEach((e,t)=>{let s=document.createElement("button");s.dataset.index=t,s.value=e.value,s.classList.add("game__card"),s.textContent="";let a=document.createElement("div");a.classList.add("card--inner");let i=document.createElement("div");i.classList.add("card--front");let d=document.createElement("div");d.classList.add("card--back"),d.textContent=e.value,"matched"===e.state&&(s.classList.add("game__card--matched"),s.setAttribute("tabIndex","-1")),this.gameBoard.appendChild(s),s.appendChild(a),a.appendChild(i),a.appendChild(d),s.addEventListener("click",()=>{this.isTesting||this.flipCard(t)}),s.addEventListener("keyup",e=>{"Enter"===e.key&&s.click()}),s.style.opacity=0,setTimeout(()=>{s.style.transition="opacity 0.4s ease",s.style.opacity=1},50*t)})}flipCard(e){"flipped"===this.#e[e].state||"matched"===this.#e[e].state||(this.#e[e].state="flipped",document.querySelector(`[data-index ='${e}']`).classList.add("game__card--flipped"),this.movements+=1,this.resultDisplay.innerHTML=`Your Moves: ${this.movements}`,this.saveDisplay(),null===this.firstIndex?this.firstIndex=e:null===this.secondIndex&&(this.secondIndex=e,this.testMatch()))}testMatch(){this.isTesting=!0;let e=document.querySelector(`[data-index='${this.firstIndex}']`),t=document.querySelector(`[data-index='${this.secondIndex}']`);setTimeout(()=>{this.#e[this.firstIndex].value===this.#e[this.secondIndex].value?(console.log("matched"),e.classList.remove("game__card--flipped"),t.classList.remove("game__card--flipped"),e.classList.add("game__card--matched"),t.classList.add("game__card--matched"),e.setAttribute("tabIndex","-1"),t.setAttribute("tabIndex","-1"),this.#e[this.firstIndex].state="matched",this.#e[this.secondIndex].state="matched",this.matchedPairs+=1,localStorage.setItem("matchedPairs",String(this.matchedPairs)),this.checkGameOver(),this.saveCards()):(e.classList.remove("game__card--flipped"),t.classList.remove("game__card--flipped"),this.#e[this.firstIndex].state="none",this.#e[this.secondIndex].state="none"),this.firstIndex=null,this.secondIndex=null,this.isTesting=!1},600)}checkGameOver(){this.matchedPairs==this.#t.length&&(document.querySelector("#game").classList.add("game--finished"),this.resumeBtn.disabled=!0,this.recordSet())}recordSet(){(this.movements<=this.record||0==this.record)&&(this.record=this.movements,localStorage.setItem("record",this.record)),this.recordDisplay.innerHTML=`Your Record: ${this.record}`}saveCards(){localStorage.setItem("cards",JSON.stringify(this.#e))}saveDisplay(){localStorage.setItem("totalMoves",JSON.stringify(this.movements))}loadGame(){this.renderCards(),this.resultDisplay.innerHTML=`Your Moves: ${this.movements}`,this.recordDisplay.innerHTML=`Your Record: ${this.record}`,this.checkGameOver(),this.isGameHidden&&this.gameBoard.classList.add("hidden"),this.manageDisplay()}restartGame(){localStorage.removeItem("cards"),localStorage.removeItem("matchedPairs"),localStorage.removeItem("totalMoves"),localStorage.removeItem("isGameHidden"),this.resumeBtn.disabled=!1,window.location.reload()}resumeGame(){this.isGameHidden=this.gameBoard.classList.toggle("hidden"),this.manageDisplay(),localStorage.setItem("isGameHidden",JSON.stringify(this.isGameHidden))}manageDisplay(){let e=document.querySelector("#gameHeading"),t=document.querySelectorAll(".skeleton-item");this.isGameHidden?(e.classList.remove("hidden"),t.forEach(e=>{e.classList.remove("hidden")}),this.resumeBtn.textContent="Resume"):(e.classList.add("hidden"),t.forEach(e=>{e.classList.add("hidden")}),this.resumeBtn.textContent="Save and quit")}}({restartBtn:e,resumeBtn:t});e.addEventListener("click",()=>s.restartGame()),t.addEventListener("click",()=>s.resumeGame()),window.addEventListener("load",()=>s.loadGame());
//# sourceMappingURL=V-2(with parcel).1be17538.js.map
